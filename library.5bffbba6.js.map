{"mappings":"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","sources":["src/library.js","src/js/queue-library.js","src/js/open-modal-library.js"],"sourcesContent":["import { spinnerPlay, spinnerStop } from './js/spinner';\n\nimport { openModalTeam } from './js/open-modal-team';\n\nimport './js/switch-bg-theme';\n\nimport { scrollFunction } from './js/button-up';\n\nimport { onCliсkBtnWatchGallery } from './js/API/get-movie-trailer';\n\nimport { onOpenQueueLibrary } from './js/queue-library';\n\nimport { onOpenWatchedLibrary } from './js/watched-library';\n\nimport { loadWatchedMoviesFromLocalStorage } from './js/watched-library';\nimport { onLibraryGallery } from './js/open-modal-library';\nimport { refs } from './js/refs';\n\n///Запуск спінера при завантаженні\nspinnerPlay();\nwindow.addEventListener('load', function (e) {\n  spinnerStop();\n});\n///Закінчення спінера при завантаженні\n\n///Запуск кнопки вверх при скролі\nwindow.addEventListener('scroll', scrollFunction);\n\n// При завантаженні сторінки My library рендериться картки з локал сторадж watchedMovies\nwindow.addEventListener('load', loadWatchedMoviesFromLocalStorage);\n\nrefs.libraryGallery.addEventListener('click', onCliсkBtnWatchGallery);\n","import { refs } from './refs';\nimport pagination from './paginationLocalStorage';\n\nimport { loadFromLocalStorage } from './local-storage';\nimport {\n  createMarkupWhenLocalStorageEmpty,\n  createMarkupWatchedMovies,\n} from './watched-library';\n\nimport { renderBtn } from './API/get-movie-trailer';\nconst KEY_QUEUE_MOVIES = 'queueMovies';\n\nif (refs.btnLibraryQueue) {\n  refs.btnLibraryQueue.addEventListener('click', onOpenQueueLibrary);\n}\n\nexport let localQueueMovies;\n\nexport function onOpenQueueLibrary(e) {\n  refs.btnLibraryQueue.classList.add('library__btn--active');\n  refs.btnLibraryWatched.classList.remove('library__btn--active');\n  const paginationBox = document.querySelector('.pagination-library-container');\n  localQueueMovies = loadFromLocalStorage(KEY_QUEUE_MOVIES);\n\n\n  if (!localQueueMovies || !Object.keys(localQueueMovies).length) {\n    const markupNothing = createMarkupWhenLocalStorageEmpty();\n    refs.libraryGallery.innerHTML = markupNothing;\n    paginationBox.innerHTML = '';\n  } else {\n    pagination(Object.keys(localQueueMovies).length, 1);\n    const moviesArray = Object.values(localQueueMovies);\n    //console.log(window.innerWidth);\n    let moviesToRender = '';\n    if (window.innerWidth >= 1280) {\n      moviesToRender = moviesArray.slice(0, 9);\n    }\n    if (window.innerWidth >= 768 && window.innerWidth < 1280) {\n      moviesToRender = moviesArray.slice(0, 8);\n    }\n    if (window.innerWidth < 768) {\n      moviesToRender = moviesArray.slice(0, 4);\n    }\n    //console.log(moviesToRender);\n    const markup = moviesToRender.map(createMarkupWatchedMovies).join('');\n\n    if (refs.libraryGallery) {\n      refs.libraryGallery.innerHTML = markup;\n\n      renderBtn();\n    }\n  }\n}\n\n","import {\n  KEY_WATCHED_MOVIES,\n  KEY_QUEUE_MOVIES,\n  loadFromLocalStorage,\n  checkLocalStorageWatchedMovies,\n  checkLocalStorageQueueMovies,\n} from './local-storage';\nimport { renderBtn } from './API/get-movie-trailer';\nimport {\n  onEscKeyPress,\n  onBackdropClick,\n  offCloseModal,\n} from './API/get-movie-info';\nimport { IMAGE_URL } from './API/api-params';\n\nimport { refs } from './refs';\n\nrefs.libraryGallery.addEventListener('click', onLibraryGallery);\n\nlet idMovie;\nlet currentMovie;\n\nexport function onLibraryGallery(e) {\n  idMovie = Number(e.target.dataset.id);\n  const film = e.target.closest('.frame');\n  if (!film || e.target.classList.contains('watch-trailer-btn-gallery')) {\n    return;\n  }\n\n  let markup = '';\n\n  const watchedMoviesFromLocalStorage =\n    loadFromLocalStorage(KEY_WATCHED_MOVIES);\n  const queueMoviesFromLocalStorage = loadFromLocalStorage(KEY_QUEUE_MOVIES);\n\n  if (watchedMoviesFromLocalStorage[idMovie]) {\n    currentMovie = watchedMoviesFromLocalStorage[idMovie];\n\n    markup = createMarkupModal(watchedMoviesFromLocalStorage[idMovie]);\n  } else if (queueMoviesFromLocalStorage[idMovie]) {\n    currentMovie = queueMoviesFromLocalStorage[idMovie];\n    markup = createMarkupModal(queueMoviesFromLocalStorage[idMovie]);\n  }\n  refs.modal.innerHTML = markup;\n  refs.body.classList.add('no-scroll');\n\n  // render trailer\n  renderBtn();\n\n  // close\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.modalBackdrop.classList.add('show-modal');\n  refs.modalBackdrop.addEventListener('click', onBackdropClick);\n  refs.closeModalBtn.addEventListener('click', offCloseModal);\n\n  //Вешаем событие на buttons:\n  if (refs.modalBackdrop.classList.contains('show-modal')) {\n    refs.modalContainer.addEventListener('click', onModalLibraryBtnsClick);\n  }\n}\n\nfunction onModalLibraryBtnsClick(e) {\n  if (e.target.classList.contains('js-add-watched')) {\n    checkLocalStorageWatchedMovies(e.target, currentMovie);\n  } else if (e.target.classList.contains('js-add-queue')) {\n    checkLocalStorageQueueMovies(e.target, currentMovie);\n  }\n}\n\nexport function createMarkupModal({\n  voteAverage,\n  voteCount,\n  genres,\n  title,\n  posterPath,\n  originalName,\n  popularity,\n  overview,\n  id,\n}) {\n  // Проверка есть ли такой обьект в локал сторадж?\n  const watchedMoviesLocalStorage = loadFromLocalStorage(KEY_WATCHED_MOVIES);\n  const queueMoviesLocalStorage = loadFromLocalStorage(KEY_QUEUE_MOVIES);\n\n  let textBtnWatched = 'ADD TO WATCHED';\n  let textBtnQueue = 'ADD TO QUEUE';\n\n  if (watchedMoviesLocalStorage && watchedMoviesLocalStorage[id]) {\n    textBtnWatched = 'REMOVE FROM WATCHED';\n  }\n\n  if (queueMoviesLocalStorage && queueMoviesLocalStorage[id]) {\n    textBtnQueue = 'REMOVE FROM QUEUE';\n  }\n\n  const modalGenres = genres.map(genre => genre.name);\n\n  return `\n          <img class=\"img-modal\"    src=\"${\n            posterPath\n              ? IMAGE_URL + posterPath\n              : 'https://ik.imagekit.io/tc8jxffbcvf/default-movie-portrait_EmJUj9Tda5wa.jpg?tr=fo-auto,di-'\n          }\" alt=\"${title}\" data-id=${id} />\n          <div class=\"container-modal\">\n            <b class=\"title-modal\">${title}</b>\n            <table class=\"table\">\n              <tr class=\"table-separator\">\n                <th class=\"table__text\">Vote / Votes</th>\n                <th><span class=\"vote-average\">${voteAverage.toFixed(\n                  1\n                )}</span> / <span class=\"vote-count\">${voteCount}</span></th>\n              </tr>\n              <tr class=\"table-separator\">\n                <th class=\"table__text\">Popularity</th>\n                <th>${popularity.toFixed(1)}</th>\n              </tr>\n              <tr class=\"table-separator\">\n                <th class=\"table__text\">Original Title</th>\n                <th>${title ? title : originalName}</th>\n              </tr>\n              <tr class=\"table-separator\">\n                <th class=\"table__text\">Genre</th>\n                <th>${modalGenres}</th>\n              </tr>\n            </table>\n            <b class=\"title-about__modal\">ABOUT</b>\n            <p class=\"about-text__modal about-scrollbar\">${overview}\n            </p>\n            <div class=\"buttons-modal\">\n              <button aria-label=\"add or remove from watched\" type=\"button\" class=\"button-watched__modal js-add-watched\">\n                  ${textBtnWatched}\n              </button>\n              <button type=\"button\" aria-label=\"add or remove from queue\" class=\"button-queue__modal js-add-queue\">${textBtnQueue}</button>\n              </div>\n               <button type=\"button\" aria-label=\"watch the trailer\" class=\"watch-trailer-btn-gallery is-hidden \" data-id=${id} >Watch the trailer</button>\n          </div>\n          `;\n}\n"],"names":["$04jNI","parcelRequire","$krGWQ","$84758fef4061c729$export$23763f7daed67147","refs","btnLibraryQueue","addEventListener","e","classList","add","btnLibraryWatched","remove","paginationBox","document","querySelector","$b5rV1","loadFromLocalStorage","Object","keys","length","$faacD","default","moviesArray","values","moviesToRender","window","innerWidth","slice","markup","map","$9MILY","createMarkupWatchedMovies","join","libraryGallery","innerHTML","$1mAvE","renderBtn","markupNothing","createMarkupWhenLocalStorageEmpty","$52d45de5747c39fe$var$idMovie","$52d45de5747c39fe$var$currentMovie","$52d45de5747c39fe$var$onModalLibraryBtnsClick","target","contains","checkLocalStorageWatchedMovies","checkLocalStorageQueueMovies","$52d45de5747c39fe$export$800eaa8b597dc39b","voteAverage","voteCount","genres","title","posterPath","originalName","popularity","overview","id","watchedMoviesLocalStorage","KEY_WATCHED_MOVIES","queueMoviesLocalStorage","KEY_QUEUE_MOVIES","textBtnWatched","textBtnQueue","modalGenres","genre","name","$czlJg","IMAGE_URL","toFixed","Number","dataset","closest","watchedMoviesFromLocalStorage","queueMoviesFromLocalStorage","modal","body","$ie2oG","onEscKeyPress","modalBackdrop","onBackdropClick","closeModalBtn","offCloseModal","modalContainer","spinnerPlay","spinnerStop","$h53OD","scrollFunction","loadWatchedMoviesFromLocalStorage"],"version":3,"file":"library.5bffbba6.js.map"}